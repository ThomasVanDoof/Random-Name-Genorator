(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();async function m(){const t="https://randomuser.me/api/",e=t+(t.includes("?")?"&":"?")+"_cb="+Date.now();console.debug("getRandomUser: fetching",e);const n=await fetch(e);if(!n.ok)throw console.error("getRandomUser: fetch failed",n.status,n.statusText),new Error("Failed to fetch random user");const o=await n.json();return console.debug("getRandomUser: got",o),o.results[0]}async function u(t={}){const e="https://corsproxy.io/?url=https://fantasyname.lukewh.com/api/",n=new URLSearchParams;t.ancestry&&n.append("ancestry",t.ancestry),t.gender&&n.append("gender",t.gender),t.family&&n.append("family",t.family);const o=n.toString().length>0?`${e}?${n.toString()}`:e,a=o+(o.includes("?")?"&":"?")+"_cb="+Date.now();console.debug("getFantasyName: fetching",a);const s=await fetch(a);if(!s.ok)throw console.error("getFantasyName: fetch failed",s.status,s.statusText),new Error("Failed to fetch fantasy name");const r=await s.text();return console.debug("getFantasyName: got",r),r}document.getElementById("year").textContent=new Date().getFullYear();document.getElementById("last-modified").textContent=`Last Modified: ${document.lastModified}`;const w=document.getElementById("generate-name-btn"),c=document.getElementById("random-name-display"),d=document.getElementById("name-category"),S=document.getElementById("name-gender"),g=document.getElementById("fantasy-filters"),B=document.getElementById("fantasy-ancestry"),y=document.getElementById("fantasy-gender"),F=document.getElementById("fantasy-family"),i=document.getElementById("favorite-btn"),p=document.getElementById("favorites-list"),x=document.getElementById("clear-favorites-btn"),h="rng-last-visit",f="rng-favorites",v="rng-last-name";function N(){const t=new Date().toLocaleString();localStorage.setItem(h,t)}(function(){const e=localStorage.getItem(h);e&&console.log("Welcome back! Last visit:",e),N()})();function E(){d.value==="fantasy"?g.style.display="block":g.style.display="none"}d.addEventListener("change",E);E();async function L(){c.textContent="Generating name...",i.disabled=!0;const t=d.value;try{let e="";if(t==="real"){const n=await m(),o=S.value;if(o!=="any"&&n.gender!==o)return L();e=`${n.name.first} ${n.name.last}`}else if(t==="fantasy"){const n={};n.ancestry=B.value,n.gender=y.value==="any"?void 0:y.value,n.family=F.value==="t"?"t":void 0,e=(await u(n)).trim()}else{const n=await m(),o=await u();e=`${n.name.first} ${n.name.last} | ${o.trim()}`}c.textContent=e,localStorage.setItem(v,e),i.disabled=!1}catch(e){console.error("Error generating name:",e),c.textContent="Failed to load names. Try again."}}w.addEventListener("click",L);(function(){const e=localStorage.getItem(v);e&&(c.textContent=e,i.disabled=!1)})();function I(){return JSON.parse(localStorage.getItem(f))||[]}function b(t){localStorage.setItem(f,JSON.stringify(t))}function l(){const t=I();p.innerHTML="",t.forEach((e,n)=>{const o=document.createElement("li");o.textContent=e;const a=document.createElement("button");a.textContent="X",a.addEventListener("click",()=>{t.splice(n,1),b(t),l()}),o.appendChild(a),p.appendChild(o)})}i.addEventListener("click",()=>{const t=c.textContent;if(!t||t.includes("Generating"))return;const e=I();if(e.length>=10){alert("You can only store 10 favorites.");return}e.push(t),b(e),l()});x.addEventListener("click",()=>{localStorage.removeItem(f),l()});l();

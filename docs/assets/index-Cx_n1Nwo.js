(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();async function m(){const e=await fetch("https://randomuser.me/api/");if(!e.ok)throw new Error("Failed to fetch random user");return(await e.json()).results[0]}async function u(t={}){const e="https://fantasyname.lukewh.com/api/",n=new URLSearchParams;t.ancestry&&n.append("ancestry",t.ancestry),t.gender&&n.append("gender",t.gender),t.family&&n.append("family",t.family);const o=n.toString().length>0?`${e}?${n.toString()}`:e,a=await fetch(o);if(!a.ok)throw new Error("Failed to fetch fantasy name");return a.text()}document.getElementById("year").textContent=new Date().getFullYear();document.getElementById("last-modified").textContent=`Last Modified: ${document.lastModified}`;const B=document.getElementById("generate-name-btn"),s=document.getElementById("random-name-display"),d=document.getElementById("name-category"),b=document.getElementById("name-gender"),y=document.getElementById("fantasy-filters"),F=document.getElementById("fantasy-ancestry"),g=document.getElementById("fantasy-gender"),p=document.getElementById("fantasy-family"),i=document.getElementById("favorite-btn"),v=document.getElementById("favorites-list"),C=document.getElementById("clear-favorites-btn"),E="rng-last-visit",f="rng-favorites",h="rng-last-name";function x(){const t=new Date().toLocaleString();localStorage.setItem(E,t)}(function(){const e=localStorage.getItem(E);e&&console.log("Welcome back! Last visit:",e),x()})();function I(){d.value==="fantasy"?y.style.display="block":y.style.display="none"}d.addEventListener("change",I);I();async function L(){s.textContent="Generating name...",i.disabled=!0;const t=d.value;try{let e="";if(t==="real"){const n=await m(),o=b.value;if(o!=="any"&&n.gender!==o)return L();e=`${n.name.first} ${n.name.last}`}else if(t==="fantasy"){const n={};n.ancestry=F.value,n.gender=g.value==="any"?void 0:g.value,n.family=p.value&&p.value!=="f"?"t":void 0,e=(await u(n)).trim()}else{const n=await m(),o=await u();e=`${n.name.first} ${n.name.last} | ${o.trim()}`}s.textContent=e,localStorage.setItem(h,e),i.disabled=!1}catch(e){console.error("Error generating name:",e),s.textContent="Failed to load names. Try again."}}B.addEventListener("click",L);(function(){const e=localStorage.getItem(h);e&&(s.textContent=e,i.disabled=!1)})();function S(){return JSON.parse(localStorage.getItem(f))||[]}function w(t){localStorage.setItem(f,JSON.stringify(t))}function c(){const t=S();v.innerHTML="",t.forEach((e,n)=>{const o=document.createElement("li");o.textContent=e;const a=document.createElement("button");a.textContent="X",a.addEventListener("click",()=>{t.splice(n,1),w(t),c()}),o.appendChild(a),v.appendChild(o)})}i.addEventListener("click",()=>{const t=s.textContent;if(!t||t.includes("Generating"))return;const e=S();if(e.length>=10){alert("You can only store 10 favorites.");return}e.push(t),w(e),c()});C.addEventListener("click",()=>{localStorage.removeItem(f),c()});c();
